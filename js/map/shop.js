!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([,function(e,t){$("body").magnificPopup({type:"image",delegate:"a.mfp-gallery",fixedContentPos:!0,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!0,removalDelay:0,mainClass:"mfp-fade",gallery:{enabled:!0},callbacks:{buildControls:function(){this.contentContainer.append(this.arrowLeft.add(this.arrowRight))}}}),$(".mfp-image").magnificPopup({type:"image",closeOnContentClick:!0,mainClass:"mfp-fade",image:{verticalFit:!0}}),$(".product-cart").on("click",function(){var e=$(this),t=e.data("price"),n=e.data("title"),a=e.data("product-id"),r=$("#prompt-popup").modal("show");r.find(".error").remove();var i=function(e){r.find(".error").remove();var i=r.find("input[name=name]").val(),o=r.find("input[name=email]").val(),d=r.find("input[name=phone]").val();if(!i.length)return r.find("form").after('<label class="error">Поле Имя обязательно</label>'),!1;if(!o.length&&!d.length)return r.find("form").after('<label class="error">Заполните поле Email или Телефон, чтобы мы могли связаться с вами</label>'),!1;if(o.length){if(!o.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/))return r.find("form").after('<label class="error">Неверный формат поля Email</label>'),!1}var l={name:i,email:o,phone:d,price:t,title:n,productId:a};$.ajax({type:"POST",url:"/shop/payment",dataType:"json",data:l,beforeSend:function(){r.find("button.confirm").attr("disabled",!0),r.find('button[data-dismiss="modal"]').attr("disabled",!0)},success:function(e){r.find(".error").remove(),r.find("h2").remove(),1==e.success?(r.find("form input").val(""),r.find("form").hide().after('<h2>Заказ успешно принят!</h2><p class="text-center">С вами свяжется наш менеджер для уточнения деталей заказа</p>'),setTimeout(function(){r.find("h2").remove(),r.find("form").show(),r.find("button.confirm").attr("disabled",!1),r.find('button[data-dismiss="modal"]').attr("disabled",!1),r.modal("hide")},3e3)):1==e.error&&(r.find("form").after('<label class="error">'+e.message+"</label>"),r.find("button.confirm").attr("disabled",!1),r.find('button[data-dismiss="modal"]').attr("disabled",!1))},error:function(e){r.find("form").after('<label class="error">'+e.message+"</label>"),r.find("button.confirm").attr("disabled",!1),r.find('button[data-dismiss="modal"]').attr("disabled",!1)}})};r.find("button.confirm").on("click",i),r.find("button[data-dismiss=modal]").on("click",function(){r.find("form input").val("")})})}]);